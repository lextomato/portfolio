steps:
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'southamerica-west1-docker.pkg.dev/${PROJECT_ID}/dockers/portfolio', '.']
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'southamerica-west1-docker.pkg.dev/${PROJECT_ID}/dockers/portfolio']
  - name: node
    entrypoint: npm
    args: ["run", "create-env"]
    env:
      - 'VITE_SEND_MAIL_URL=${_VITE_SEND_MAIL_URL}'
      - 'VITE_TOKEN_CLOUD_FUNCTION=${_VITE_TOKEN_CLOUD_FUNCTION}'

options:
  logging: CLOUD_LOGGING_ONLY

timeout: "1600s"